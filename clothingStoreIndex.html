<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Clothing Store</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">      
		<link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">		
		<link href="themes/css/bootstrappage.css" rel="stylesheet"/>
		<link href="themes/css/flexslider.css" rel="stylesheet"/>
		<link href="themes/css/main.css" rel="stylesheet"/>

		<!-- scripts -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="shoppingCart.js"></script>
	</head>
    <body>		
		<div id="top-bar" class="container">
			<div class="row">
				<div class="span4">
					<form method="POST" class="search_form">
						<input type="text" class="input-block-level search-query" Placeholder="eg. T-sirt">
					</form>
				</div>
				
			</div>
		</div>
		<div id="wrapper" class="container">
			<section class="navbar main-menu">
				<div class="navbar-inner main-menu">				
					<a href="index.html" class="logo pull-left"><img src="themes/images/logo.png" class="site_logo" alt=""></a>
					<nav id="menu" class="pull-right">
						<ul>
																			
							<li><a href="./products.html">Man</a></li>			
										
							
						</ul>
					</nav>
				</div>
			</section>				
			<section class="header_text sub">
			<img class="pageBanner" src="http://www.cebc.org.br/sites/default/files/styles/960x150/public/banner_11.jpg" alt="New products" >
				<h4><span>Shopping Cart</span></h4>
			</section>
			<section class="main-content">				
				<div class="row">
					<div class="span9">					
						<h4 class="title"><span class="text"><strong>Your</strong> Cart</span></h4>
						<table class="table table-striped">
							<thead>
								<tr>
									<th>Image</th>
									<th>Product Image</th>
									<th>Product Name</th>
									<th>Unit Price</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td><button><a class="add-to-cart" href="#" data-name="Gingerbread Sweater" data-price="74.99">Add To Cart</a></button></td>										
									<td><img src="https://cdnb.lystit.com/photos/c411-2015/10/29/asos-charcoal-christmas-jumper-with-gingerbread-men-in-wool-mix-gray-product-0-870521078-normal.jpeg" alt="sweater" height="100px" width="80px"></a></td>
									<td><p>Gingerbread sweater</p></td>
									
									<td>$75.00</td>
								</tr>			  
								<tr>
									<td><button><a class="add-to-cart" href="#" data-name="Biker Jacket" data-price="149.99">Add To Cart</a></button></td>
									<td><img src="https://www.thefashionisto.com/wp-content/uploads/2016/01/ASOS-Leather-Jacket-Suede-Fringe-Detailing-001-800x1021.jpg" alt="jacket" height="100px" width="80px"></a></td>
									<td><p>Biker Jacket</p></td>
									<td>$150.00</td>
								</tr>
								<tr>
									<td><button><a class="add-to-cart" href="#" data-name="Maroon Suite" data-price="199.99">Add To Cart</a></button></td>										
									<td><img src="https://images.express.com/is/image/expressfashion/39_526_1527_894_f01?cache=on&wid=640&fmt=jpeg&qlt=70,1&resmode=sharp2&op_usm=1,1,5,0&fit=fit,1" alt="Suite" height="100px" width="80px"></a></td>
									<td><p>Maroon Suite</p></td>
									<td>$200.00</td>
								</tr>
								<tr>
										<td><button><a class="add-to-cart" href="#" data-name="Black Parka" data-price="174.99">Add To Cart</a></button></td>
									<td><img src="https://cdnd.lystit.com/photos/6424-2016/03/09/asos-black-duster-coat-in-black-product-3-858581842-normal.jpeg" alt="parka" height="100px" width="80px"></a></td>
									<td><p>Black Parka</p></td>
									<td>$175.00</td>
								</tr>		  
							</tbody>
						</table>
						<hr>
						<h2>Total Cart</h2>
					</div>
					<div>
						<ul id="show-cart"></ul>
						<div id="p1">You have <span id="count-cart">X</span> items in your cart</div>
						<div id="p1">Total Cart:$<span id="total-cart"></span></div>
					</div>
				
					<button id="clear-cart">Clear Cart</button>
					<button id="checkout">CheckOut</button>					
					</div>
				</div>
			</section>			
			<section id="footer-bar">
				<div class="row">
					<div class="span3">
						<h4>Navigation</h4>
						<ul class="nav">
							<li><a href="./index.html">Homepage</a></li>  
							<li><a href="./about.html">About Us</a></li>
							<li><a href="./contact.html">Contac Us</a></li>
							<li><a href="./cart.html">Your Cart</a></li>
							<li><a href="./register.html">Login</a></li>							
						</ul>					
					</div>
					
					<div class="span5">
						<p class="logo"><img src="themes/images/logo.png" class="site_logo" alt=""></p>
						
						<br/>
						<span class="social_icons">
							<a class="facebook" href="#">Facebook</a>
							<a class="twitter" href="#">Twitter</a>
							<a class="skype" href="#">Skype</a>
							<a class="vimeo" href="#">Vimeo</a>
						</span>
					</div>					
				</div>	
			</section>
		</div>

		<script>
			$(".add-to-cart").click(function(event) {
            event.preventDefault();
            var name = $(this).attr("data-name");
            var price = Number($(this).attr("data-price"));

            shoppingCart.addItemToCart(name, price, 1);
            displayCart();
        });

        $("#clear-cart").click(function(event) {
            shoppingCart.clearCart();
            displayCart();
        });

        function displayCart() {
            var cartArray = shoppingCart.listCart();
            console.log(cartArray);
            var output = "";

            for (var i in cartArray) {
                output += "<li>" +
                    cartArray[i].name +
                    " <input class='item-count' type='number' data-name='" +
                    cartArray[i].name +
                    "' value='" + cartArray[i].count + "' >" +
                    " x " + cartArray[i].price +
                    " = " + cartArray[i].total +
                    " <button class='plus-item' data-name='" +
                    cartArray[i].name + "'>+</button>" +
                    " <button class='subtract-item' data-name='" +
                    cartArray[i].name + "'>-</button>" +
                    " <button class='delete-item' data-name='" +
                    cartArray[i].name + "'>Remove</button>" +
                    "</li>";
            }

            $("#show-cart").html(output);
            $("#count-cart").html(shoppingCart.countCart());
            $("#total-cart").html(shoppingCart.totalCart());
        }

        $("#show-cart").on("click", ".delete-item", function(event) {
            var name = $(this).attr("data-name");
            shoppingCart.removeItemFromCartAll(name);
            displayCart();
        });

        $("#show-cart").on("click", ".subtract-item", function(event) {
            var name = $(this).attr("data-name");
            shoppingCart.removeItemFromCart(name);
            displayCart();
        });

        $("#show-cart").on("click", ".plus-item", function(event) {
            var name = $(this).attr("data-name");
            shoppingCart.addItemToCart(name, 0, 1);
            displayCart();
        });

        $("#show-cart").on("change", ".item-count", function(event) {
            var name = $(this).attr("data-name");
            var count = Number($(this).val());
            shoppingCart.setCountForItem(name, count);
            displayCart();
        });


		displayCart();
		
		</script>		
    </body>
</html>
